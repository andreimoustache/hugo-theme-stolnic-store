{{ define "main" }}

<section class="section">
  <div class="container">
    <div class="hero">
      <div class="hero-body">
        <h1 class="title">{{ .Title }}</h1>
        <h2 class="subtitle is-family-secondary">{{ .Site.Params.subtitle | markdownify }}</h2>
      </div>
    </div>
  </div>
</section>

{{- $products := getJSON (getenv "API_PRODUCTS_ENDPOINT") -}}
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column">
        <div class="columns is-multiline is-8">
        {{ range $products }}
          <div class="column is-one-quarter">
            {{ partial "product-preview" . }}
          </div>
        {{ end }}
        </div>
      </div>
      <div class="column is-one-quarter">
        <div class="columns is-multiline">
          <div class="column is-full">
            {{ partial "shopping-cart" }}
          </div>
          <div class="column is-full">
            {{ partial "order-details" . }}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{{ end }}
